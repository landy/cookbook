name: HHM
extensions:

    # Configuration for dapr goes here.
    -   name: dapr
        log-level: debug
        app-ssl: false
        components-path: ./dapr-components
        config: observe
        services:
            recipesapi:
                enabled: false

            feapp:
                http-port: 5090

# Services to run go here.
services:

    # The name will be used as the app-id. For a .NET project, Tye only needs the path to the project file.
    -   name: feapp
#        project: src/Household.Api.Server/Household.Api.Server.fsproj
        dockerFile: src/Household.Api.Server/Dockerfile
        dockerFileContext: .
        bindings:
            - port: 5050
#              containerPort: 80
              protocol: http
        env_file:
            - ./.docker-env
    -   name: recipes-api
#        project: src/Household.Recipes/Household.Recipes.fsproj
        dockerFile: src/Household.Recipes/Dockerfile
        dockerFileContext: .
        bindings:
            - port: 5040
#              containerPort: 80
              protocol: http

ingress:
    - name: cookbook
      bindings:
          - port: 5000
      rules:
          - service: feapp